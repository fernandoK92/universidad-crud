generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Carrera {
  id             Int            @id @default(autoincrement())
  nombre         String
  estudiantes    Estudiante[]    
  docentesCarrera DocenteCarrera[] 
  materias       Materia[]       @relation("CarreraMaterias") 
  registros      Registro[]      
}

model Materia {
  id             Int             @id @default(autoincrement())
  nombre         String
  registros      Registro[]      
  inscripciones  Inscripcion[]   
  dictan         Dictan[]        
  carreras       Carrera[]       @relation("CarreraMaterias") 
}

model Estudiante {
  id             Int             @id @default(autoincrement())
  nombre         String
  carreraId      Int             
  carrera        Carrera         @relation(fields: [carreraId], references: [id])
  inscripciones  Inscripcion[]   
}

model Docente {
  id             Int              @id @default(autoincrement())
  nombre         String
  dictan         Dictan[]         // Relación con materias que dicta
  docentesCarrera DocenteCarrera[] // Relación con carreras
}

model Registro {
  id          Int       @id @default(autoincrement())
  carreraId   Int
  materiaId   Int 
  carrera     Carrera   @relation(fields: [carreraId], references: [id])
  materia     Materia   @relation(fields: [materiaId], references: [id])
}

model Inscripcion {
  id            Int         @id @default(autoincrement())
  estudianteId  Int
  materiaId     Int 
  estudiante    Estudiante  @relation(fields: [estudianteId], references: [id])
  materia       Materia     @relation(fields: [materiaId], references: [id])
}

model Dictan {
  id          Int      @id @default(autoincrement())
  docenteId   Int
  materiaId   Int 
  docente     Docente  @relation(fields: [docenteId], references: [id])
  materia     Materia  @relation(fields: [materiaId], references: [id])
}

model DocenteCarrera {
  id          Int      @id @default(autoincrement())
  docenteId   Int
  carreraId   Int
  docente     Docente  @relation(fields: [docenteId], references: [id])
  carrera     Carrera  @relation(fields: [carreraId], references: [id])
}
